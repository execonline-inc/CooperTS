<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><meta name="next-head-count" content="2"/><link rel="preload" href="/_next/static/css/d5dddaf8529238a3.css" as="style"/><link rel="stylesheet" href="/_next/static/css/d5dddaf8529238a3.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-5cd94c89d3acac5f.js"></script><script src="/_next/static/chunks/webpack-69bfa6990bb9e155.js" defer=""></script><script src="/_next/static/chunks/framework-76d02cbefae1782a.js" defer=""></script><script src="/_next/static/chunks/main-b92974553887b4ef.js" defer=""></script><script src="/_next/static/chunks/pages/_app-9f98dae87cb0d5e0.js" defer=""></script><script src="/_next/static/chunks/584-80bdec2b9215d0a8.js" defer=""></script><script src="/_next/static/chunks/pages/guide/%5Bslug%5D-10baf375277e2a9b.js" defer=""></script><script src="/_next/static/WVkJPj8rskKbfmSiJaetI/_buildManifest.js" defer=""></script><script src="/_next/static/WVkJPj8rskKbfmSiJaetI/_ssgManifest.js" defer=""></script><script src="/_next/static/WVkJPj8rskKbfmSiJaetI/_middlewareManifest.js" defer=""></script></head><body><div id="__next"><header class="Header_header__Z8PUO"><nav><ul><li><a href="/">CooperTS</a></li><li><a href="/about">About</a></li><li><a href="/start">Getting Started</a></li><li><a href="/guide">Guide</a></li><li><a href="/examples">Examples</a></li></ul></nav></header><main class="container"><a href="/guide" aria-label="Go Back">‚Üê Go Back</a><h3>Translations Package</h3><div><h1 id="translations"><code>translations</code></h1>
<p>The <code>translations</code> package provides a library for support of typed translation keys and typed React-based translation interpolation.</p>
<h2 id="usage">Usage</h2>
<p>This library uses the <a href="https://www.i18next.com/">i18next</a> library underneath a custom adapter. The i18next library handles translating, pluralizing, and basic interpolation (using <code>{{abc}}</code> placeholders).</p>
<p>The custom adapter implementation handles type-checking and component interpolation (using <code>&lt;abc/&gt;</code> and <code>&lt;abc&gt;...&lt;/abc&gt;</code> placeholders).</p>
<p>All translation content must be added to the translation files whose location is specified with the <code>loadPath</code> configuration which is passed to i18next.</p>
<p>See the <code>translations</code> function for integrating the library into an application. Create a translations module in the application and export the relevant things.</p>
<h2 id="types">Types</h2>
<h2 id="components">Components</h2>
<h3 id="alreadytranslated"><code>AlreadyTranslated</code></h3>
<p>This component represents content that has already been translated (such as pre-translated content from a backend). Its use in a component tree helps to distinguish content that has been addressed for translation with content that has not.</p>
<pre><code class="language-tsx">import { AlreadyTranslated, AlreadyTranslatedText } from &#39;@execonline-inc/translations&#39;;

const text: AlreadyTranslatedText = { kind: &#39;already-translated-text&#39;, text: &#39;content&#39; };
const component = &lt;AlreadyTranslated content={text} /&gt;;
</code></pre>
<h3 id="l"><code>L</code></h3>
<p>This component will localize a date/time according to a given format.</p>
<pre><code class="language-ts">import { LocalizationFormat, Localizeable, translations } from &#39;@execonline-inc/translations&#39;;
const { L } = translations&lt;...&gt;(...) // see `translations` documentation

const localizeable: Localizeable = new Date();
const format: LocalizationFormat = &#39;long-date-and-time&#39;;

const component = &lt;L localizeable={localizeable} format={format} /&gt;;
</code></pre>
<h3 id="t"><code>T</code></h3>
<p>This component performs all available translation features given a typed translation definition via its props.</p>
<pre><code class="language-tsx">import { translations } from &#39;@execonline-inc/translations&#39;;
const { T } = translations&lt;...&gt;(...) // see `translations` documentation

const component = &lt;T kind=&quot;something to translate&quot; /&gt;;
</code></pre>
<h3 id="nottranslated"><code>NotTranslated</code></h3>
<p>Some content is not suitable for translation. Some examples of this are:</p>
<ul>
<li>proper names (though there may be cases where they can be represented in the target language)</li>
<li>email addresses</li>
<li>URLs</li>
</ul>
<p>Rendering this type of content directly in component trees may be confused with content that hasn&#39;t been addressed for translation yet, so wrapping it in this component makes it clear that it has been considered for translation.</p>
<pre><code class="language-tsx">import { NotTranslated } from &#39;@execonline-inc/translations&#39;;

const text: string = &#39;not translatable&#39;;
const component = &lt;NotTranslated text={text} /&gt;;
</code></pre>
<h3 id="translationscontext"><code>TranslationsContext</code></h3>
<p>This component is an implementation of a <a href="https://reactjs.org/docs/context.html">React Context</a> whose data is a <code>TranslationsState</code>.</p>
<pre><code class="language-tsx">import { TranslationsContext, TranslationsState } from &#39;@execonline-inc/translations&#39;;

const state: TranslationsState = { kind: &#39;uninitialized&#39; };
const consumer = (ts: TranslationsState): React.ReactNode =&gt; &lt;&gt;{ts.kind}&lt;/&gt;;

const Example: React.FC = () =&gt; (
  &lt;TranslationsContext.Provider value={state}&gt;
    &lt;TranslationsContext.Consumer&gt;{consumer}&lt;/TranslationsContext.Consumer&gt;
  &lt;/TranslationsContext.Provider&gt;
);
</code></pre>
<h3 id="translationsloader"><code>TranslationsLoader</code></h3>
<p>This component loads the the translations when it is mounted and wraps its children in a <code>TranslationsContext.Provider</code>. It renders the component passed as the <code>loading</code> prop until the translations are loaded to prevent the normal child components from rendering without content (because it&#39;s awaiting translation) and eventually appearing suddenly.</p>
<pre><code class="language-tsx">import { translations, TranslationsLoader } from &#39;@execonline-inc/translations&#39;;
const { loader } = translations&lt;...&gt;(...) // see `translations` documentation

const component = &lt;TranslationsLoader loader={loader} loading={&lt;&gt;&lt;/&gt;} /&gt;;
</code></pre>
<h2 id="functions">Functions</h2>
<h3 id="alreadytranslatedtext"><code>alreadyTranslatedText</code></h3>
<p>This decoder decodes to an <code>AlreadyTranslatedText</code> object from a string.</p>
<pre><code class="language-ts">import { alreadyTranslatedText, AlreadyTranslatedText } from &#39;@execonline-inc/translations&#39;;

const decoder: Decoder&lt;AlreadyTranslatedText&gt; = alreadyTranslatedText;
const result: Result&lt;string, AlreadyTranslatedText&gt; = decoder.decodeAny(&#39;content&#39;);
</code></pre>
<h3 id="defaultsettings"><code>defaultSettings</code></h3>
<p>These are default settings for <code>i18next</code> based on ExecOnline&#39;s use of the library.</p>
<h3 id="inittask"><code>initTask</code></h3>
<p>This function will return a <code>Task</code> to initialize <code>i18next</code>. It provides the opportunity for <code>i18next</code> to be configured as necessary by the user of this library.</p>
<pre><code class="language-tsx">import { initTask, TranslationsLoader } from &#39;@execonline-inc/translations&#39;;
import i18next from &#39;i18next&#39;;
import LanguageDetector from &#39;i18next-browser-languagedetector&#39;;
import HttpApi from &#39;i18next-http-backend&#39;;

const i18nextSettings = {
  /* ... */
};

const i18nextWithModules = i18next.use(HttpApi).use(LanguageDetector);

const loader = initTask(i18nextWithModules, i18nextSettings);

&lt;TranslationsLoader loader={loader} loading={&lt;&gt;&lt;/&gt;} /&gt;;
</code></pre>
<h3 id="localization"><code>localization</code></h3>
<p>This function will localize a date/time for a given language and according to a given format.</p>
<pre><code class="language-ts">import { localization, LocalizationFormat, Localizeable } from &#39;@execonline-inc/translations&#39;;

const localizeable: Localizeable = new Date();
const format: LocalizationFormat = &#39;long-date-and-time&#39;;
const language = &#39;en-US&#39;;

const result = localization(localizeable, format, language);
</code></pre>
<h3 id="localizer"><code>localizer</code></h3>
<p>This curried function will localize a date/time according to a given format under certain translation mapping load states.</p>
<p>When the state is <code>loaded</code> or <code>loaded-from-fallback</code>, localization occurs via a call to <code>localization</code>.</p>
<p>When the state is <code>uninitialized</code>, the localizeable argument is converted to a string.</p>
<pre><code class="language-ts">import {
  localizer,
  LocalizationFormat,
  Localizeable,
  TranslationsState,
} from &#39;@execonline-inc/translations&#39;;

const localizeable: Localizeable = new Date();
const format: LocalizationFormat = &#39;long-date-and-time&#39;;
const state: TranslationsState = { kind: &#39;uninitialized&#39; };

const result: string = localizer(localizeable, format)(state);
</code></pre>
<h3 id="translation"><code>translation</code></h3>
<p>This curried function performs the lookup in the translation mapping file and simple interpolation when appropriate based on the text to be translated and the state of the mapping.</p>
<p>When the state is <code>loaded</code> or <code>loaded-from-fallback</code>, the mapped translation text is returned. If the text is found to be &quot;not translatable&quot;, then it is returned without translation.</p>
<p>When the state is <code>uninitialized</code>, an empty string is returned.</p>
<pre><code class="language-ts">import { translations, TranslationsState } from &#39;@execonline-inc/translations&#39;;
const { translation } = translations&lt;...&gt;(...) // see `translations` documentation

const state: TranslationsState = { kind: &#39;uninitialized&#39; };
const result: string = translation(&#39;something to translate&#39;, {})(state);
</code></pre>
<h3 id="translator"><code>translator</code></h3>
<p>This curried function performs all available translation features given a typed translation definition and the mapping load state.</p>
<pre><code class="language-ts">import { translations, TranslationsState } from &#39;@execonline-inc/translations&#39;;
const { translator } = translations&lt;...&gt;(...) // see `translations` documentation

const state: TranslationsState = { kind: &#39;uninitialized&#39; };
const result: React.ReactNode = translator({ kind: &#39;something to translate&#39; })(state);
</code></pre>
<h3 id="translations-1"><code>translations</code></h3>
<p>This function returns an object of functions and components that are typed according to the translation types provided to the <code>translations</code> function.</p>
<pre><code class="language-ts">import {
  Config,
  translations,
  interpolator,
  Interpolator,
  parameterized,
  Parameterized,
  ParameterizedFn,
  scalar,
} from &#39;@execonline-inc/translations&#39;;
import i18next, * as i18n from &#39;i18next&#39;;
import LanguageDetector from &#39;i18next-browser-languagedetector&#39;;

const loader = initTask(i18next.use(LanguageDetector), {
  ...defaultSettings,
  backend: {
    loadPath: &#39;public/locales/{{lng}}/{{ns}}.json&#39;,
  },
});

const translatablePlainTextKeys = [&#39;something to translate&#39;, &#39;something else&#39;] as const;
const notTranslatable = [&#39;email@example.com&#39;, &#39;https://example.com/&#39;] as const;

type TranslatablePlainTextKey = typeof translatablePlainTextKeys[number];
type NotTranslatable = typeof notTranslatable[number];
type ParameterizedProps =
  | { kind: &#39;{{count}} minutes&#39;; count: number }
  | { kind: &#39;&lt;bolded&gt;So&lt;/bolded&gt; cool!&#39;; bolded: Interpolator };

type PlainTextKey = TranslatablePlainTextKey | NotTranslatable;
type ParameterizedKey = ParameterizedProps[&#39;kind&#39;];

const parameterizedValues: ParameterizedFn&lt;ParameterizedKey, ParameterizedProps&gt; = (
  props: ParameterizedProps
): Parameterized&lt;ParameterizedKey, ParameterizedProps&gt; =&gt; {
  switch (props.kind) {
    case &#39;{{count}} minutes&#39;:
      return parameterized(props, { count: scalar(props.count) });
    case &#39;&lt;bolded&gt;So&lt;/bolded&gt; cool!&#39;:
      return parameterized(props, { bolded: interpolator(props.bolded) });
  }
};

const { L, translation, translator, T } = translations&lt;
  PlainTextKey,
  NotTranslatable,
  ParameterizedKey,
  ParameterizedProps
&gt;(translatablePlainTextKeys, notTranslatable, parameterizedValues);
</code></pre>
</div></main></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"page":{"frontmatter":{"title":"Translations Package","description":"Typescript-enforced keys \u0026 React-based interpolation for translations"},"slug":"translations","content":"\n# `translations`\n\nThe `translations` package provides a library for support of typed translation keys and typed React-based translation interpolation.\n\n## Usage\n\nThis library uses the [i18next](https://www.i18next.com/) library underneath a custom adapter. The i18next library handles translating, pluralizing, and basic interpolation (using `{{abc}}` placeholders).\n\nThe custom adapter implementation handles type-checking and component interpolation (using `\u003cabc/\u003e` and `\u003cabc\u003e...\u003c/abc\u003e` placeholders).\n\nAll translation content must be added to the translation files whose location is specified with the `loadPath` configuration which is passed to i18next.\n\nSee the `translations` function for integrating the library into an application. Create a translations module in the application and export the relevant things.\n\n## Types\n\n## Components\n\n### `AlreadyTranslated`\n\nThis component represents content that has already been translated (such as pre-translated content from a backend). Its use in a component tree helps to distinguish content that has been addressed for translation with content that has not.\n\n```tsx\nimport { AlreadyTranslated, AlreadyTranslatedText } from '@execonline-inc/translations';\n\nconst text: AlreadyTranslatedText = { kind: 'already-translated-text', text: 'content' };\nconst component = \u003cAlreadyTranslated content={text} /\u003e;\n```\n\n### `L`\n\nThis component will localize a date/time according to a given format.\n\n```ts\nimport { LocalizationFormat, Localizeable, translations } from '@execonline-inc/translations';\nconst { L } = translations\u003c...\u003e(...) // see `translations` documentation\n\nconst localizeable: Localizeable = new Date();\nconst format: LocalizationFormat = 'long-date-and-time';\n\nconst component = \u003cL localizeable={localizeable} format={format} /\u003e;\n```\n\n### `T`\n\nThis component performs all available translation features given a typed translation definition via its props.\n\n```tsx\nimport { translations } from '@execonline-inc/translations';\nconst { T } = translations\u003c...\u003e(...) // see `translations` documentation\n\nconst component = \u003cT kind=\"something to translate\" /\u003e;\n```\n\n### `NotTranslated`\n\nSome content is not suitable for translation. Some examples of this are:\n\n- proper names (though there may be cases where they can be represented in the target language)\n- email addresses\n- URLs\n\nRendering this type of content directly in component trees may be confused with content that hasn't been addressed for translation yet, so wrapping it in this component makes it clear that it has been considered for translation.\n\n```tsx\nimport { NotTranslated } from '@execonline-inc/translations';\n\nconst text: string = 'not translatable';\nconst component = \u003cNotTranslated text={text} /\u003e;\n```\n\n### `TranslationsContext`\n\nThis component is an implementation of a [React Context](https://reactjs.org/docs/context.html) whose data is a `TranslationsState`.\n\n```tsx\nimport { TranslationsContext, TranslationsState } from '@execonline-inc/translations';\n\nconst state: TranslationsState = { kind: 'uninitialized' };\nconst consumer = (ts: TranslationsState): React.ReactNode =\u003e \u003c\u003e{ts.kind}\u003c/\u003e;\n\nconst Example: React.FC = () =\u003e (\n  \u003cTranslationsContext.Provider value={state}\u003e\n    \u003cTranslationsContext.Consumer\u003e{consumer}\u003c/TranslationsContext.Consumer\u003e\n  \u003c/TranslationsContext.Provider\u003e\n);\n```\n\n### `TranslationsLoader`\n\nThis component loads the the translations when it is mounted and wraps its children in a `TranslationsContext.Provider`. It renders the component passed as the `loading` prop until the translations are loaded to prevent the normal child components from rendering without content (because it's awaiting translation) and eventually appearing suddenly.\n\n```tsx\nimport { translations, TranslationsLoader } from '@execonline-inc/translations';\nconst { loader } = translations\u003c...\u003e(...) // see `translations` documentation\n\nconst component = \u003cTranslationsLoader loader={loader} loading={\u003c\u003e\u003c/\u003e} /\u003e;\n```\n\n## Functions\n\n### `alreadyTranslatedText`\n\nThis decoder decodes to an `AlreadyTranslatedText` object from a string.\n\n```ts\nimport { alreadyTranslatedText, AlreadyTranslatedText } from '@execonline-inc/translations';\n\nconst decoder: Decoder\u003cAlreadyTranslatedText\u003e = alreadyTranslatedText;\nconst result: Result\u003cstring, AlreadyTranslatedText\u003e = decoder.decodeAny('content');\n```\n\n### `defaultSettings`\n\nThese are default settings for `i18next` based on ExecOnline's use of the library.\n\n### `initTask`\n\nThis function will return a `Task` to initialize `i18next`. It provides the opportunity for `i18next` to be configured as necessary by the user of this library.\n\n```tsx\nimport { initTask, TranslationsLoader } from '@execonline-inc/translations';\nimport i18next from 'i18next';\nimport LanguageDetector from 'i18next-browser-languagedetector';\nimport HttpApi from 'i18next-http-backend';\n\nconst i18nextSettings = {\n  /* ... */\n};\n\nconst i18nextWithModules = i18next.use(HttpApi).use(LanguageDetector);\n\nconst loader = initTask(i18nextWithModules, i18nextSettings);\n\n\u003cTranslationsLoader loader={loader} loading={\u003c\u003e\u003c/\u003e} /\u003e;\n```\n\n### `localization`\n\nThis function will localize a date/time for a given language and according to a given format.\n\n```ts\nimport { localization, LocalizationFormat, Localizeable } from '@execonline-inc/translations';\n\nconst localizeable: Localizeable = new Date();\nconst format: LocalizationFormat = 'long-date-and-time';\nconst language = 'en-US';\n\nconst result = localization(localizeable, format, language);\n```\n\n### `localizer`\n\nThis curried function will localize a date/time according to a given format under certain translation mapping load states.\n\nWhen the state is `loaded` or `loaded-from-fallback`, localization occurs via a call to `localization`.\n\nWhen the state is `uninitialized`, the localizeable argument is converted to a string.\n\n```ts\nimport {\n  localizer,\n  LocalizationFormat,\n  Localizeable,\n  TranslationsState,\n} from '@execonline-inc/translations';\n\nconst localizeable: Localizeable = new Date();\nconst format: LocalizationFormat = 'long-date-and-time';\nconst state: TranslationsState = { kind: 'uninitialized' };\n\nconst result: string = localizer(localizeable, format)(state);\n```\n\n### `translation`\n\nThis curried function performs the lookup in the translation mapping file and simple interpolation when appropriate based on the text to be translated and the state of the mapping.\n\nWhen the state is `loaded` or `loaded-from-fallback`, the mapped translation text is returned. If the text is found to be \"not translatable\", then it is returned without translation.\n\nWhen the state is `uninitialized`, an empty string is returned.\n\n```ts\nimport { translations, TranslationsState } from '@execonline-inc/translations';\nconst { translation } = translations\u003c...\u003e(...) // see `translations` documentation\n\nconst state: TranslationsState = { kind: 'uninitialized' };\nconst result: string = translation('something to translate', {})(state);\n```\n\n### `translator`\n\nThis curried function performs all available translation features given a typed translation definition and the mapping load state.\n\n```ts\nimport { translations, TranslationsState } from '@execonline-inc/translations';\nconst { translator } = translations\u003c...\u003e(...) // see `translations` documentation\n\nconst state: TranslationsState = { kind: 'uninitialized' };\nconst result: React.ReactNode = translator({ kind: 'something to translate' })(state);\n```\n\n### `translations`\n\nThis function returns an object of functions and components that are typed according to the translation types provided to the `translations` function.\n\n```ts\nimport {\n  Config,\n  translations,\n  interpolator,\n  Interpolator,\n  parameterized,\n  Parameterized,\n  ParameterizedFn,\n  scalar,\n} from '@execonline-inc/translations';\nimport i18next, * as i18n from 'i18next';\nimport LanguageDetector from 'i18next-browser-languagedetector';\n\nconst loader = initTask(i18next.use(LanguageDetector), {\n  ...defaultSettings,\n  backend: {\n    loadPath: 'public/locales/{{lng}}/{{ns}}.json',\n  },\n});\n\nconst translatablePlainTextKeys = ['something to translate', 'something else'] as const;\nconst notTranslatable = ['email@example.com', 'https://example.com/'] as const;\n\ntype TranslatablePlainTextKey = typeof translatablePlainTextKeys[number];\ntype NotTranslatable = typeof notTranslatable[number];\ntype ParameterizedProps =\n  | { kind: '{{count}} minutes'; count: number }\n  | { kind: '\u003cbolded\u003eSo\u003c/bolded\u003e cool!'; bolded: Interpolator };\n\ntype PlainTextKey = TranslatablePlainTextKey | NotTranslatable;\ntype ParameterizedKey = ParameterizedProps['kind'];\n\nconst parameterizedValues: ParameterizedFn\u003cParameterizedKey, ParameterizedProps\u003e = (\n  props: ParameterizedProps\n): Parameterized\u003cParameterizedKey, ParameterizedProps\u003e =\u003e {\n  switch (props.kind) {\n    case '{{count}} minutes':\n      return parameterized(props, { count: scalar(props.count) });\n    case '\u003cbolded\u003eSo\u003c/bolded\u003e cool!':\n      return parameterized(props, { bolded: interpolator(props.bolded) });\n  }\n};\n\nconst { L, translation, translator, T } = translations\u003c\n  PlainTextKey,\n  NotTranslatable,\n  ParameterizedKey,\n  ParameterizedProps\n\u003e(translatablePlainTextKeys, notTranslatable, parameterizedValues);\n```\n"}},"__N_SSG":true},"page":"/guide/[slug]","query":{"slug":"translations"},"buildId":"WVkJPj8rskKbfmSiJaetI","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>