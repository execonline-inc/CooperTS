<!DOCTYPE html><html class="dark js-focus-visible antialiased [font-feature-settings:&#x27;ss01&#x27;]" lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><meta name="next-head-count" content="2"/><link rel="preconnect" href="https://fonts.googleapis.com"/><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin /><link rel="preload" href="/_next/static/css/c3c652cee5f0d3cc.css" as="style"/><link rel="stylesheet" href="/_next/static/css/c3c652cee5f0d3cc.css" data-n-g=""/><link rel="preload" href="/_next/static/css/5ca09d9210f45551.css" as="style"/><link rel="stylesheet" href="/_next/static/css/5ca09d9210f45551.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-5cd94c89d3acac5f.js"></script><script src="/_next/static/chunks/webpack-5752944655d749a0.js" defer=""></script><script src="/_next/static/chunks/framework-76d02cbefae1782a.js" defer=""></script><script src="/_next/static/chunks/main-b92974553887b4ef.js" defer=""></script><script src="/_next/static/chunks/pages/_app-c3ea1a105fde863d.js" defer=""></script><script src="/_next/static/chunks/c727088c-1d2ac074e11cb790.js" defer=""></script><script src="/_next/static/chunks/63-78b0e34dce6c1d75.js" defer=""></script><script src="/_next/static/chunks/pages/guide/%5Bslug%5D-1a0543e7c50f8f2f.js" defer=""></script><script src="/_next/static/mgDmpDuQ-1NkIUvq3ANjL/_buildManifest.js" defer=""></script><script src="/_next/static/mgDmpDuQ-1NkIUvq3ANjL/_ssgManifest.js" defer=""></script><script src="/_next/static/mgDmpDuQ-1NkIUvq3ANjL/_middlewareManifest.js" defer=""></script><style data-href="https://fonts.googleapis.com/css2?family=Atkinson+Hyperlegible:ital,wght@0,400;0,700;1,400;1,700&display=swap">@font-face{font-family:'Atkinson Hyperlegible';font-style:italic;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/atkinsonhyperlegible/v10/9Bt43C1KxNDXMspQ1lPyU89-1h6ONRlW45G055Iu.woff) format('woff')}@font-face{font-family:'Atkinson Hyperlegible';font-style:italic;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/atkinsonhyperlegible/v10/9Bt93C1KxNDXMspQ1lPyU89-1h6ONRlW45G056qRdiWJ.woff) format('woff')}@font-face{font-family:'Atkinson Hyperlegible';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/atkinsonhyperlegible/v10/9Bt23C1KxNDXMspQ1lPyU89-1h6ONRlW45GE5g.woff) format('woff')}@font-face{font-family:'Atkinson Hyperlegible';font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/atkinsonhyperlegible/v10/9Bt73C1KxNDXMspQ1lPyU89-1h6ONRlW45G8WbcNcA.woff) format('woff')}@font-face{font-family:'Atkinson Hyperlegible';font-style:italic;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/atkinsonhyperlegible/v10/9Bt43C1KxNDXMspQ1lPyU89-1h6ONRlW45G056IkUwCgblWmLWQ.woff2) format('woff2');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Atkinson Hyperlegible';font-style:italic;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/atkinsonhyperlegible/v10/9Bt43C1KxNDXMspQ1lPyU89-1h6ONRlW45G056IqUwCgblWm.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:'Atkinson Hyperlegible';font-style:italic;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/atkinsonhyperlegible/v10/9Bt93C1KxNDXMspQ1lPyU89-1h6ONRlW45G056qRdhWDTFiMF225Z2k.woff2) format('woff2');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Atkinson Hyperlegible';font-style:italic;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/atkinsonhyperlegible/v10/9Bt93C1KxNDXMspQ1lPyU89-1h6ONRlW45G056qRdhWNTFiMF225.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:'Atkinson Hyperlegible';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/atkinsonhyperlegible/v10/9Bt23C1KxNDXMspQ1lPyU89-1h6ONRlW45G07JIoWQeCbGWn.woff2) format('woff2');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Atkinson Hyperlegible';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/atkinsonhyperlegible/v10/9Bt23C1KxNDXMspQ1lPyU89-1h6ONRlW45G04pIoWQeCbA.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:'Atkinson Hyperlegible';font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/atkinsonhyperlegible/v10/9Bt73C1KxNDXMspQ1lPyU89-1h6ONRlW45G8Wbc9eiWPRl-uFV24.woff2) format('woff2');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Atkinson Hyperlegible';font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/atkinsonhyperlegible/v10/9Bt73C1KxNDXMspQ1lPyU89-1h6ONRlW45G8Wbc9dCWPRl-uFQ.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}</style></head><body class="prose prose-slate bg-white prose-lead:text-slate-500 prose-a:font-bold prose-a:no-underline prose-a:text-sky-500 max-w-full prose-a:shadow-[inset_0_17px_0_0_var(--tw-prose-background,#fff),inset_0_calc(-1*(var(--tw-prose-underline-size,4px)+2px))_0_0_var(--tw-prose-underline,theme(colors.sky.300))] hover:prose-a:[--tw-prose-underline-size:6px] dark:prose-invert dark:bg-slate-900 dark:text-slate-400 dark:[--tw-prose-background:theme(colors.slate.900)] dark:prose-lead:text-slate-400 dark:prose-a:text-sky-400 dark:prose-a:shadow-[var(--darkProseAShadow)] dark:hover:prose-a:[--tw-prose-underline-size:3px] dark:prose-hr:border-slate-800"><div id="__next"><div class="flex h-screen w-screen flex-col justify-between scroll-smooth"><header class="not-prose sticky top-0 z-50 flex items-center justify-between space-x-6 bg-white py-3 shadow-md shadow-slate-900/5 transition duration-500 dark:shadow-none sm:space-x-10 sm:py-4 md:py-5 dark:bg-transparent"><div class="content-container-width mx-auto py-3 flex items-center justify-between space-x-6"><a class="text-base font-bold text-green-600 hover:text-indigo-900 dark:text-green-300 dark:hover:text-indigo-300 sm:text-lg" href="/">CooperTS</a><nav class="md:text-md flex space-x-5 text-sm sm:space-x-10 sm:text-sm"><a class="font-medium text-gray-600 hover:text-gray-900 dark:text-gray-300 dark:hover:text-white" href="/about">About</a><a class="font-medium text-gray-600 hover:text-gray-900 dark:text-gray-300 dark:hover:text-white" href="/guide">Guide</a><a class="font-medium text-gray-600 hover:text-gray-900 dark:text-gray-300 dark:hover:text-white" href="/packages">Packages</a><a class="font-medium text-gray-600 hover:text-gray-900 dark:text-gray-300 dark:hover:text-white" href="/examples">Examples</a><a class="group" href="https://github.com/execonline-inc/CooperTS"><span class="sr-only">CooperTS on GitHub</span><svg aria-hidden="true" viewBox="0 0 16 16" class="h-6 w-6 fill-slate-500 group-hover:fill-slate-700 dark:fill-slate-300 dark:group-hover:fill-white"><path d="M8 0C3.58 0 0 3.58 0 8C0 11.54 2.29 14.53 5.47 15.59C5.87 15.66 6.02 15.42 6.02 15.21C6.02 15.02 6.01 14.39 6.01 13.72C4 14.09 3.48 13.23 3.32 12.78C3.23 12.55 2.84 11.84 2.5 11.65C2.22 11.5 1.82 11.13 2.49 11.12C3.12 11.11 3.57 11.7 3.72 11.94C4.44 13.15 5.59 12.81 6.05 12.6C6.12 12.08 6.33 11.73 6.56 11.53C4.78 11.33 2.92 10.64 2.92 7.58C2.92 6.71 3.23 5.99 3.74 5.43C3.66 5.23 3.38 4.41 3.82 3.31C3.82 3.31 4.49 3.1 6.02 4.13C6.66 3.95 7.34 3.86 8.02 3.86C8.7 3.86 9.38 3.95 10.02 4.13C11.55 3.09 12.22 3.31 12.22 3.31C12.66 4.41 12.38 5.23 12.3 5.43C12.81 5.99 13.12 6.7 13.12 7.58C13.12 10.65 11.25 11.33 9.47 11.53C9.76 11.78 10.01 12.26 10.01 13.01C10.01 14.08 10 14.94 10 15.21C10 15.42 10.15 15.67 10.55 15.59C13.71 14.53 16 11.53 16 8C16 3.58 12.42 0 8 0Z"></path></svg></a></nav></div></header><main class="fixed-origin content-container-width relative mx-auto flex flex-col justify-center"><div class="py-10 md:py-16"><span class="not-prose group"><a href="/guide" aria-label="Go Back" class="dark:text-sky-400  dark:hover:text-slate-300 text-sky-500 hover:text-sky-600 text-base font-bold hover:text-sky-600 dark:hover:text-sky-500 relative transform transition"><span aria-hidden="true" class="translate-x-0 transform transition-all duration-200 group-hover:-translate-x-2"><i class="fa fas fa-arrow-left group-hover:text-amber-500"></i></span> <!-- -->Go Back<!-- --></a></span><article class="relative"><header><h1 class="font-display text-3xl tracking-tight text-slate-900 dark:text-white">Translations Package</h1></header><div class="prose prose-slate w-full lg:max-w-none prose-headings:scroll-mt-28 prose-headings:font-display prose-headings:font-normal prose-lead:text-slate-500 prose-a:font-semibold prose-a:no-underline prose-a:shadow-[var(--proseAShadow)] hover:prose-a:[--tw-prose-underline-size:6px] prose-pre:rounded-xl prose-pre:bg-slate-900 prose-pre:shadow-lg prose-pre:p-3 md:prose-pre:p-5 prose-pre:text-xs md:prose-pre:text-sm lg:prose-pre:text-base dark:prose-invert dark:text-slate-400 dark:[--tw-prose-background:theme(colors.slate.900)] dark:prose-lead:text-slate-400 dark:prose-a:text-sky-400 dark:prose-a:shadow-[var(--darkProseAShadow)] dark:hover:prose-a:[--tw-prose-underline-size:6px] dark:prose-pre:bg-slate-800/60 dark:prose-pre:shadow-none dark:prose-pre:ring-1 dark:prose-pre:ring-slate-300/10 dark:prose-hr:border-slate-800 lg:prose-headings:scroll-mt-[8.5rem]"><h1 id="translations"><code>translations</code></h1>
<p>The <code>translations</code> package provides a library for support of typed translation keys and typed React-based translation interpolation.</p>
<h2 id="usage">Usage</h2>
<p>This library uses the <a href="https://www.i18next.com/">i18next</a> library underneath a custom adapter. The i18next library handles translating, pluralizing, and basic interpolation (using <code>{{abc}}</code> placeholders).</p>
<p>The custom adapter implementation handles type-checking and component interpolation (using <code>&lt;abc/&gt;</code> and <code>&lt;abc&gt;...&lt;/abc&gt;</code> placeholders).</p>
<p>All translation content must be added to the translation files whose location is specified with the <code>loadPath</code> configuration which is passed to i18next.</p>
<p>See the <code>translations</code> function for integrating the library into an application. Create a translations module in the application and export the relevant things.</p>
<h2 id="types">Types</h2>
<h2 id="components">Components</h2>
<h3 id="alreadytranslated"><code>AlreadyTranslated</code></h3>
<p>This component represents content that has already been translated (such as pre-translated content from a backend). Its use in a component tree helps to distinguish content that has been addressed for translation with content that has not.</p>
<pre><code class="language-tsx"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">AlreadyTranslated</span>, <span class="hljs-title class_">AlreadyTranslatedText</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@execonline-inc/translations&#x27;</span>;

<span class="hljs-keyword">const</span> <span class="hljs-attr">text</span>: <span class="hljs-title class_">AlreadyTranslatedText</span> = { <span class="hljs-attr">kind</span>: <span class="hljs-string">&#x27;already-translated-text&#x27;</span>, <span class="hljs-attr">text</span>: <span class="hljs-string">&#x27;content&#x27;</span> };
<span class="hljs-keyword">const</span> component = <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">AlreadyTranslated</span> <span class="hljs-attr">content</span>=<span class="hljs-string">{text}</span> /&gt;</span></span>;
</code></pre>
<h3 id="l"><code>L</code></h3>
<p>This component will localize a date/time according to a given format.</p>
<pre><code class="language-ts"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">LocalizationFormat</span>, <span class="hljs-title class_">Localizeable</span>, translations } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@execonline-inc/translations&#x27;</span>;
<span class="hljs-keyword">const</span> { L } = translations&lt;...&gt;(...) <span class="hljs-comment">// see `translations` documentation</span>

<span class="hljs-keyword">const</span> <span class="hljs-attr">localizeable</span>: <span class="hljs-title class_">Localizeable</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>();
<span class="hljs-keyword">const</span> <span class="hljs-attr">format</span>: <span class="hljs-title class_">LocalizationFormat</span> = <span class="hljs-string">&#x27;long-date-and-time&#x27;</span>;

<span class="hljs-keyword">const</span> component = <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">L</span> <span class="hljs-attr">localizeable</span>=<span class="hljs-string">{localizeable}</span> <span class="hljs-attr">format</span>=<span class="hljs-string">{format}</span> /&gt;</span></span>;
</code></pre>
<h3 id="t"><code>T</code></h3>
<p>This component performs all available translation features given a typed translation definition via its props.</p>
<pre><code class="language-tsx"><span class="hljs-keyword">import</span> { translations } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@execonline-inc/translations&#x27;</span>;
<span class="hljs-keyword">const</span> { T } = translations&lt;...&gt;(...) <span class="hljs-comment">// see `translations` documentation</span>

<span class="hljs-keyword">const</span> component = <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">T</span> <span class="hljs-attr">kind</span>=<span class="hljs-string">&quot;something to translate&quot;</span> /&gt;</span></span>;
</code></pre>
<h3 id="nottranslated"><code>NotTranslated</code></h3>
<p>Some content is not suitable for translation. Some examples of this are:</p>
<ul>
<li>proper names (though there may be cases where they can be represented in the target language)</li>
<li>email addresses</li>
<li>URLs</li>
</ul>
<p>Rendering this type of content directly in component trees may be confused with content that hasn&#39;t been addressed for translation yet, so wrapping it in this component makes it clear that it has been considered for translation.</p>
<pre><code class="language-tsx"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">NotTranslated</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@execonline-inc/translations&#x27;</span>;

<span class="hljs-keyword">const</span> <span class="hljs-attr">text</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">&#x27;not translatable&#x27;</span>;
<span class="hljs-keyword">const</span> component = <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">NotTranslated</span> <span class="hljs-attr">text</span>=<span class="hljs-string">{text}</span> /&gt;</span></span>;
</code></pre>
<h3 id="translationscontext"><code>TranslationsContext</code></h3>
<p>This component is an implementation of a <a href="https://reactjs.org/docs/context.html">React Context</a> whose data is a <code>TranslationsState</code>.</p>
<pre><code class="language-tsx"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">TranslationsContext</span>, <span class="hljs-title class_">TranslationsState</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@execonline-inc/translations&#x27;</span>;

<span class="hljs-keyword">const</span> <span class="hljs-attr">state</span>: <span class="hljs-title class_">TranslationsState</span> = { <span class="hljs-attr">kind</span>: <span class="hljs-string">&#x27;uninitialized&#x27;</span> };
<span class="hljs-keyword">const</span> consumer = (<span class="hljs-attr">ts</span>: <span class="hljs-title class_">TranslationsState</span>): <span class="hljs-title class_">React</span>.<span class="hljs-property">ReactNode</span> =&gt; <span class="language-xml"><span class="hljs-tag">&lt;&gt;</span>{ts.kind}<span class="hljs-tag">&lt;/&gt;</span></span>;

<span class="hljs-keyword">const</span> <span class="hljs-title class_">Example</span>: <span class="hljs-title class_">React</span>.<span class="hljs-property">FC</span> = <span class="hljs-function">() =&gt;</span> (
  <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">TranslationsContext.Provider</span> <span class="hljs-attr">value</span>=<span class="hljs-string">{state}</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">TranslationsContext.Consumer</span>&gt;</span>{consumer}<span class="hljs-tag">&lt;/<span class="hljs-name">TranslationsContext.Consumer</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">TranslationsContext.Provider</span>&gt;</span></span>
);
</code></pre>
<h3 id="translationsloader"><code>TranslationsLoader</code></h3>
<p>This component loads the the translations when it is mounted and wraps its children in a <code>TranslationsContext.Provider</code>. It renders the component passed as the <code>loading</code> prop until the translations are loaded to prevent the normal child components from rendering without content (because it&#39;s awaiting translation) and eventually appearing suddenly.</p>
<pre><code class="language-tsx"><span class="hljs-keyword">import</span> { translations, <span class="hljs-title class_">TranslationsLoader</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@execonline-inc/translations&#x27;</span>;
<span class="hljs-keyword">const</span> { loader } = translations&lt;...&gt;(...) <span class="hljs-comment">// see `translations` documentation</span>

<span class="hljs-keyword">const</span> component = <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">TranslationsLoader</span> <span class="hljs-attr">loader</span>=<span class="hljs-string">{loader}</span> <span class="hljs-attr">loading</span>=<span class="hljs-string">{</span>&lt;&gt;</span><span class="hljs-tag">&lt;/&gt;</span></span>} /&gt;;
</code></pre>
<h2 id="functions">Functions</h2>
<h3 id="alreadytranslatedtext"><code>alreadyTranslatedText</code></h3>
<p>This decoder decodes to an <code>AlreadyTranslatedText</code> object from a string.</p>
<pre><code class="language-ts"><span class="hljs-keyword">import</span> { alreadyTranslatedText, <span class="hljs-title class_">AlreadyTranslatedText</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@execonline-inc/translations&#x27;</span>;

<span class="hljs-keyword">const</span> <span class="hljs-attr">decoder</span>: <span class="hljs-title class_">Decoder</span>&lt;<span class="hljs-title class_">AlreadyTranslatedText</span>&gt; = alreadyTranslatedText;
<span class="hljs-keyword">const</span> <span class="hljs-attr">result</span>: <span class="hljs-title class_">Result</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-title class_">AlreadyTranslatedText</span>&gt; = decoder.<span class="hljs-title function_">decodeAny</span>(<span class="hljs-string">&#x27;content&#x27;</span>);
</code></pre>
<h3 id="defaultsettings"><code>defaultSettings</code></h3>
<p>These are default settings for <code>i18next</code> based on ExecOnline&#39;s use of the library.</p>
<h3 id="inittask"><code>initTask</code></h3>
<p>This function will return a <code>Task</code> to initialize <code>i18next</code>. It provides the opportunity for <code>i18next</code> to be configured as necessary by the user of this library.</p>
<pre><code class="language-tsx"><span class="hljs-keyword">import</span> { initTask, <span class="hljs-title class_">TranslationsLoader</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@execonline-inc/translations&#x27;</span>;
<span class="hljs-keyword">import</span> i18next <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;i18next&#x27;</span>;
<span class="hljs-keyword">import</span> <span class="hljs-title class_">LanguageDetector</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;i18next-browser-languagedetector&#x27;</span>;
<span class="hljs-keyword">import</span> <span class="hljs-title class_">HttpApi</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;i18next-http-backend&#x27;</span>;

<span class="hljs-keyword">const</span> i18nextSettings = {
  <span class="hljs-comment">/* ... */</span>
};

<span class="hljs-keyword">const</span> i18nextWithModules = i18next.<span class="hljs-title function_">use</span>(<span class="hljs-title class_">HttpApi</span>).<span class="hljs-title function_">use</span>(<span class="hljs-title class_">LanguageDetector</span>);

<span class="hljs-keyword">const</span> loader = <span class="hljs-title function_">initTask</span>(i18nextWithModules, i18nextSettings);

<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">TranslationsLoader</span> <span class="hljs-attr">loader</span>=<span class="hljs-string">{loader}</span> <span class="hljs-attr">loading</span>=<span class="hljs-string">{</span>&lt;&gt;</span><span class="hljs-tag">&lt;/&gt;</span></span>} /&gt;;
</code></pre>
<h3 id="localization"><code>localization</code></h3>
<p>This function will localize a date/time for a given language and according to a given format.</p>
<pre><code class="language-ts"><span class="hljs-keyword">import</span> { localization, <span class="hljs-title class_">LocalizationFormat</span>, <span class="hljs-title class_">Localizeable</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@execonline-inc/translations&#x27;</span>;

<span class="hljs-keyword">const</span> <span class="hljs-attr">localizeable</span>: <span class="hljs-title class_">Localizeable</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>();
<span class="hljs-keyword">const</span> <span class="hljs-attr">format</span>: <span class="hljs-title class_">LocalizationFormat</span> = <span class="hljs-string">&#x27;long-date-and-time&#x27;</span>;
<span class="hljs-keyword">const</span> language = <span class="hljs-string">&#x27;en-US&#x27;</span>;

<span class="hljs-keyword">const</span> result = <span class="hljs-title function_">localization</span>(localizeable, format, language);
</code></pre>
<h3 id="localizer"><code>localizer</code></h3>
<p>This curried function will localize a date/time according to a given format under certain translation mapping load states.</p>
<p>When the state is <code>loaded</code> or <code>loaded-from-fallback</code>, localization occurs via a call to <code>localization</code>.</p>
<p>When the state is <code>uninitialized</code>, the localizeable argument is converted to a string.</p>
<pre><code class="language-ts"><span class="hljs-keyword">import</span> {
  localizer,
  <span class="hljs-title class_">LocalizationFormat</span>,
  <span class="hljs-title class_">Localizeable</span>,
  <span class="hljs-title class_">TranslationsState</span>,
} <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@execonline-inc/translations&#x27;</span>;

<span class="hljs-keyword">const</span> <span class="hljs-attr">localizeable</span>: <span class="hljs-title class_">Localizeable</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>();
<span class="hljs-keyword">const</span> <span class="hljs-attr">format</span>: <span class="hljs-title class_">LocalizationFormat</span> = <span class="hljs-string">&#x27;long-date-and-time&#x27;</span>;
<span class="hljs-keyword">const</span> <span class="hljs-attr">state</span>: <span class="hljs-title class_">TranslationsState</span> = { <span class="hljs-attr">kind</span>: <span class="hljs-string">&#x27;uninitialized&#x27;</span> };

<span class="hljs-keyword">const</span> <span class="hljs-attr">result</span>: <span class="hljs-built_in">string</span> = <span class="hljs-title function_">localizer</span>(localizeable, format)(state);
</code></pre>
<h3 id="translation"><code>translation</code></h3>
<p>This curried function performs the lookup in the translation mapping file and simple interpolation when appropriate based on the text to be translated and the state of the mapping.</p>
<p>When the state is <code>loaded</code> or <code>loaded-from-fallback</code>, the mapped translation text is returned. If the text is found to be &quot;not translatable&quot;, then it is returned without translation.</p>
<p>When the state is <code>uninitialized</code>, an empty string is returned.</p>
<pre><code class="language-ts"><span class="hljs-keyword">import</span> { translations, <span class="hljs-title class_">TranslationsState</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@execonline-inc/translations&#x27;</span>;
<span class="hljs-keyword">const</span> { translation } = translations&lt;...&gt;(...) <span class="hljs-comment">// see `translations` documentation</span>

<span class="hljs-keyword">const</span> <span class="hljs-attr">state</span>: <span class="hljs-title class_">TranslationsState</span> = { <span class="hljs-attr">kind</span>: <span class="hljs-string">&#x27;uninitialized&#x27;</span> };
<span class="hljs-keyword">const</span> <span class="hljs-attr">result</span>: <span class="hljs-built_in">string</span> = <span class="hljs-title function_">translation</span>(<span class="hljs-string">&#x27;something to translate&#x27;</span>, {})(state);
</code></pre>
<h3 id="translator"><code>translator</code></h3>
<p>This curried function performs all available translation features given a typed translation definition and the mapping load state.</p>
<pre><code class="language-ts"><span class="hljs-keyword">import</span> { translations, <span class="hljs-title class_">TranslationsState</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@execonline-inc/translations&#x27;</span>;
<span class="hljs-keyword">const</span> { translator } = translations&lt;...&gt;(...) <span class="hljs-comment">// see `translations` documentation</span>

<span class="hljs-keyword">const</span> <span class="hljs-attr">state</span>: <span class="hljs-title class_">TranslationsState</span> = { <span class="hljs-attr">kind</span>: <span class="hljs-string">&#x27;uninitialized&#x27;</span> };
<span class="hljs-keyword">const</span> <span class="hljs-attr">result</span>: <span class="hljs-title class_">React</span>.<span class="hljs-property">ReactNode</span> = <span class="hljs-title function_">translator</span>({ <span class="hljs-attr">kind</span>: <span class="hljs-string">&#x27;something to translate&#x27;</span> })(state);
</code></pre>
<h3 id="translations-1"><code>translations</code></h3>
<p>This function returns an object of functions and components that are typed according to the translation types provided to the <code>translations</code> function.</p>
<pre><code class="language-ts"><span class="hljs-keyword">import</span> {
  <span class="hljs-title class_">Config</span>,
  translations,
  interpolator,
  <span class="hljs-title class_">Interpolator</span>,
  parameterized,
  <span class="hljs-title class_">Parameterized</span>,
  <span class="hljs-title class_">ParameterizedFn</span>,
  scalar,
} <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@execonline-inc/translations&#x27;</span>;
<span class="hljs-keyword">import</span> i18next, * <span class="hljs-keyword">as</span> i18n <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;i18next&#x27;</span>;
<span class="hljs-keyword">import</span> <span class="hljs-title class_">LanguageDetector</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;i18next-browser-languagedetector&#x27;</span>;

<span class="hljs-keyword">const</span> loader = <span class="hljs-title function_">initTask</span>(i18next.<span class="hljs-title function_">use</span>(<span class="hljs-title class_">LanguageDetector</span>), {
  ...defaultSettings,
  <span class="hljs-attr">backend</span>: {
    <span class="hljs-attr">loadPath</span>: <span class="hljs-string">&#x27;public/locales/{{lng}}/{{ns}}.json&#x27;</span>,
  },
});

<span class="hljs-keyword">const</span> translatablePlainTextKeys = [<span class="hljs-string">&#x27;something to translate&#x27;</span>, <span class="hljs-string">&#x27;something else&#x27;</span>] <span class="hljs-keyword">as</span> <span class="hljs-keyword">const</span>;
<span class="hljs-keyword">const</span> notTranslatable = [<span class="hljs-string">&#x27;email@example.com&#x27;</span>, <span class="hljs-string">&#x27;https://example.com/&#x27;</span>] <span class="hljs-keyword">as</span> <span class="hljs-keyword">const</span>;

<span class="hljs-keyword">type</span> <span class="hljs-title class_">TranslatablePlainTextKey</span> = <span class="hljs-keyword">typeof</span> translatablePlainTextKeys[<span class="hljs-built_in">number</span>];
<span class="hljs-keyword">type</span> <span class="hljs-title class_">NotTranslatable</span> = <span class="hljs-keyword">typeof</span> notTranslatable[<span class="hljs-built_in">number</span>];
<span class="hljs-keyword">type</span> <span class="hljs-title class_">ParameterizedProps</span> =
  | { <span class="hljs-attr">kind</span>: <span class="hljs-string">&#x27;{{count}} minutes&#x27;</span>; <span class="hljs-attr">count</span>: <span class="hljs-built_in">number</span> }
  | { <span class="hljs-attr">kind</span>: <span class="hljs-string">&#x27;&lt;bolded&gt;So&lt;/bolded&gt; cool!&#x27;</span>; <span class="hljs-attr">bolded</span>: <span class="hljs-title class_">Interpolator</span> };

<span class="hljs-keyword">type</span> <span class="hljs-title class_">PlainTextKey</span> = <span class="hljs-title class_">TranslatablePlainTextKey</span> | <span class="hljs-title class_">NotTranslatable</span>;
<span class="hljs-keyword">type</span> <span class="hljs-title class_">ParameterizedKey</span> = <span class="hljs-title class_">ParameterizedProps</span>[<span class="hljs-string">&#x27;kind&#x27;</span>];

<span class="hljs-keyword">const</span> <span class="hljs-attr">parameterizedValues</span>: <span class="hljs-title class_">ParameterizedFn</span>&lt;<span class="hljs-title class_">ParameterizedKey</span>, <span class="hljs-title class_">ParameterizedProps</span>&gt; = (
  <span class="hljs-attr">props</span>: <span class="hljs-title class_">ParameterizedProps</span>
): <span class="hljs-title class_">Parameterized</span>&lt;<span class="hljs-title class_">ParameterizedKey</span>, <span class="hljs-title class_">ParameterizedProps</span>&gt; =&gt; {
  <span class="hljs-keyword">switch</span> (props.<span class="hljs-property">kind</span>) {
    <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;{{count}} minutes&#x27;</span>:
      <span class="hljs-keyword">return</span> <span class="hljs-title function_">parameterized</span>(props, { <span class="hljs-attr">count</span>: <span class="hljs-title function_">scalar</span>(props.<span class="hljs-property">count</span>) });
    <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;&lt;bolded&gt;So&lt;/bolded&gt; cool!&#x27;</span>:
      <span class="hljs-keyword">return</span> <span class="hljs-title function_">parameterized</span>(props, { <span class="hljs-attr">bolded</span>: <span class="hljs-title function_">interpolator</span>(props.<span class="hljs-property">bolded</span>) });
  }
};

<span class="hljs-keyword">const</span> { L, translation, translator, T } = translations&lt;
  <span class="hljs-title class_">PlainTextKey</span>,
  <span class="hljs-title class_">NotTranslatable</span>,
  <span class="hljs-title class_">ParameterizedKey</span>,
  <span class="hljs-title class_">ParameterizedProps</span>
&gt;(translatablePlainTextKeys, notTranslatable, parameterizedValues);
</code></pre>
</div></article></div></main><div class="fixed bottom-0 right-0 z-[10000] flex h-auto w-auto items-center justify-center p-1  text-sm font-bold text-white dark:text-slate-900 rounded-full bg-slate-800 sm:bg-red-900 md:bg-blue-800 lg:bg-green-800 xl:bg-amber-600"><div class="inline-flex sm:hidden">xs (default)</div><div class="hidden sm:inline-flex md:hidden">SM</div><div class="hidden md:inline-flex lg:hidden">MD</div><div class="hidden lg:inline-flex xl:hidden">LG</div><div class="hidden xl:inline-flex">XL</div></div><footer class="not-prose sticky top-0 z-50 
        flex flex-wrap items-center justify-between
        bg-white
        py-5 px-4 shadow-md
        shadow-slate-900/5 
        dark:bg-slate-900/95 dark:shadow-none
        sm:px-6 lg:px-8" aria-label="footer"><p>Â© <!-- -->2022 <!-- --><a href="https://www.execonline.com/" target="_blank" rel="noopener noreferrer">ExecOnline</a></p></footer></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"page":{"slug":"translations","frontmatter":{"title":"Translations Package","description":"Typescript-enforced keys \u0026 React-based interpolation for translations"},"markdown":{"content":"\n# `translations`\n\nThe `translations` package provides a library for support of typed translation keys and typed React-based translation interpolation.\n\n## Usage\n\nThis library uses the [i18next](https://www.i18next.com/) library underneath a custom adapter. The i18next library handles translating, pluralizing, and basic interpolation (using `{{abc}}` placeholders).\n\nThe custom adapter implementation handles type-checking and component interpolation (using `\u003cabc/\u003e` and `\u003cabc\u003e...\u003c/abc\u003e` placeholders).\n\nAll translation content must be added to the translation files whose location is specified with the `loadPath` configuration which is passed to i18next.\n\nSee the `translations` function for integrating the library into an application. Create a translations module in the application and export the relevant things.\n\n## Types\n\n## Components\n\n### `AlreadyTranslated`\n\nThis component represents content that has already been translated (such as pre-translated content from a backend). Its use in a component tree helps to distinguish content that has been addressed for translation with content that has not.\n\n```tsx\nimport { AlreadyTranslated, AlreadyTranslatedText } from '@execonline-inc/translations';\n\nconst text: AlreadyTranslatedText = { kind: 'already-translated-text', text: 'content' };\nconst component = \u003cAlreadyTranslated content={text} /\u003e;\n```\n\n### `L`\n\nThis component will localize a date/time according to a given format.\n\n```ts\nimport { LocalizationFormat, Localizeable, translations } from '@execonline-inc/translations';\nconst { L } = translations\u003c...\u003e(...) // see `translations` documentation\n\nconst localizeable: Localizeable = new Date();\nconst format: LocalizationFormat = 'long-date-and-time';\n\nconst component = \u003cL localizeable={localizeable} format={format} /\u003e;\n```\n\n### `T`\n\nThis component performs all available translation features given a typed translation definition via its props.\n\n```tsx\nimport { translations } from '@execonline-inc/translations';\nconst { T } = translations\u003c...\u003e(...) // see `translations` documentation\n\nconst component = \u003cT kind=\"something to translate\" /\u003e;\n```\n\n### `NotTranslated`\n\nSome content is not suitable for translation. Some examples of this are:\n\n- proper names (though there may be cases where they can be represented in the target language)\n- email addresses\n- URLs\n\nRendering this type of content directly in component trees may be confused with content that hasn't been addressed for translation yet, so wrapping it in this component makes it clear that it has been considered for translation.\n\n```tsx\nimport { NotTranslated } from '@execonline-inc/translations';\n\nconst text: string = 'not translatable';\nconst component = \u003cNotTranslated text={text} /\u003e;\n```\n\n### `TranslationsContext`\n\nThis component is an implementation of a [React Context](https://reactjs.org/docs/context.html) whose data is a `TranslationsState`.\n\n```tsx\nimport { TranslationsContext, TranslationsState } from '@execonline-inc/translations';\n\nconst state: TranslationsState = { kind: 'uninitialized' };\nconst consumer = (ts: TranslationsState): React.ReactNode =\u003e \u003c\u003e{ts.kind}\u003c/\u003e;\n\nconst Example: React.FC = () =\u003e (\n  \u003cTranslationsContext.Provider value={state}\u003e\n    \u003cTranslationsContext.Consumer\u003e{consumer}\u003c/TranslationsContext.Consumer\u003e\n  \u003c/TranslationsContext.Provider\u003e\n);\n```\n\n### `TranslationsLoader`\n\nThis component loads the the translations when it is mounted and wraps its children in a `TranslationsContext.Provider`. It renders the component passed as the `loading` prop until the translations are loaded to prevent the normal child components from rendering without content (because it's awaiting translation) and eventually appearing suddenly.\n\n```tsx\nimport { translations, TranslationsLoader } from '@execonline-inc/translations';\nconst { loader } = translations\u003c...\u003e(...) // see `translations` documentation\n\nconst component = \u003cTranslationsLoader loader={loader} loading={\u003c\u003e\u003c/\u003e} /\u003e;\n```\n\n## Functions\n\n### `alreadyTranslatedText`\n\nThis decoder decodes to an `AlreadyTranslatedText` object from a string.\n\n```ts\nimport { alreadyTranslatedText, AlreadyTranslatedText } from '@execonline-inc/translations';\n\nconst decoder: Decoder\u003cAlreadyTranslatedText\u003e = alreadyTranslatedText;\nconst result: Result\u003cstring, AlreadyTranslatedText\u003e = decoder.decodeAny('content');\n```\n\n### `defaultSettings`\n\nThese are default settings for `i18next` based on ExecOnline's use of the library.\n\n### `initTask`\n\nThis function will return a `Task` to initialize `i18next`. It provides the opportunity for `i18next` to be configured as necessary by the user of this library.\n\n```tsx\nimport { initTask, TranslationsLoader } from '@execonline-inc/translations';\nimport i18next from 'i18next';\nimport LanguageDetector from 'i18next-browser-languagedetector';\nimport HttpApi from 'i18next-http-backend';\n\nconst i18nextSettings = {\n  /* ... */\n};\n\nconst i18nextWithModules = i18next.use(HttpApi).use(LanguageDetector);\n\nconst loader = initTask(i18nextWithModules, i18nextSettings);\n\n\u003cTranslationsLoader loader={loader} loading={\u003c\u003e\u003c/\u003e} /\u003e;\n```\n\n### `localization`\n\nThis function will localize a date/time for a given language and according to a given format.\n\n```ts\nimport { localization, LocalizationFormat, Localizeable } from '@execonline-inc/translations';\n\nconst localizeable: Localizeable = new Date();\nconst format: LocalizationFormat = 'long-date-and-time';\nconst language = 'en-US';\n\nconst result = localization(localizeable, format, language);\n```\n\n### `localizer`\n\nThis curried function will localize a date/time according to a given format under certain translation mapping load states.\n\nWhen the state is `loaded` or `loaded-from-fallback`, localization occurs via a call to `localization`.\n\nWhen the state is `uninitialized`, the localizeable argument is converted to a string.\n\n```ts\nimport {\n  localizer,\n  LocalizationFormat,\n  Localizeable,\n  TranslationsState,\n} from '@execonline-inc/translations';\n\nconst localizeable: Localizeable = new Date();\nconst format: LocalizationFormat = 'long-date-and-time';\nconst state: TranslationsState = { kind: 'uninitialized' };\n\nconst result: string = localizer(localizeable, format)(state);\n```\n\n### `translation`\n\nThis curried function performs the lookup in the translation mapping file and simple interpolation when appropriate based on the text to be translated and the state of the mapping.\n\nWhen the state is `loaded` or `loaded-from-fallback`, the mapped translation text is returned. If the text is found to be \"not translatable\", then it is returned without translation.\n\nWhen the state is `uninitialized`, an empty string is returned.\n\n```ts\nimport { translations, TranslationsState } from '@execonline-inc/translations';\nconst { translation } = translations\u003c...\u003e(...) // see `translations` documentation\n\nconst state: TranslationsState = { kind: 'uninitialized' };\nconst result: string = translation('something to translate', {})(state);\n```\n\n### `translator`\n\nThis curried function performs all available translation features given a typed translation definition and the mapping load state.\n\n```ts\nimport { translations, TranslationsState } from '@execonline-inc/translations';\nconst { translator } = translations\u003c...\u003e(...) // see `translations` documentation\n\nconst state: TranslationsState = { kind: 'uninitialized' };\nconst result: React.ReactNode = translator({ kind: 'something to translate' })(state);\n```\n\n### `translations`\n\nThis function returns an object of functions and components that are typed according to the translation types provided to the `translations` function.\n\n```ts\nimport {\n  Config,\n  translations,\n  interpolator,\n  Interpolator,\n  parameterized,\n  Parameterized,\n  ParameterizedFn,\n  scalar,\n} from '@execonline-inc/translations';\nimport i18next, * as i18n from 'i18next';\nimport LanguageDetector from 'i18next-browser-languagedetector';\n\nconst loader = initTask(i18next.use(LanguageDetector), {\n  ...defaultSettings,\n  backend: {\n    loadPath: 'public/locales/{{lng}}/{{ns}}.json',\n  },\n});\n\nconst translatablePlainTextKeys = ['something to translate', 'something else'] as const;\nconst notTranslatable = ['email@example.com', 'https://example.com/'] as const;\n\ntype TranslatablePlainTextKey = typeof translatablePlainTextKeys[number];\ntype NotTranslatable = typeof notTranslatable[number];\ntype ParameterizedProps =\n  | { kind: '{{count}} minutes'; count: number }\n  | { kind: '\u003cbolded\u003eSo\u003c/bolded\u003e cool!'; bolded: Interpolator };\n\ntype PlainTextKey = TranslatablePlainTextKey | NotTranslatable;\ntype ParameterizedKey = ParameterizedProps['kind'];\n\nconst parameterizedValues: ParameterizedFn\u003cParameterizedKey, ParameterizedProps\u003e = (\n  props: ParameterizedProps\n): Parameterized\u003cParameterizedKey, ParameterizedProps\u003e =\u003e {\n  switch (props.kind) {\n    case '{{count}} minutes':\n      return parameterized(props, { count: scalar(props.count) });\n    case '\u003cbolded\u003eSo\u003c/bolded\u003e cool!':\n      return parameterized(props, { bolded: interpolator(props.bolded) });\n  }\n};\n\nconst { L, translation, translator, T } = translations\u003c\n  PlainTextKey,\n  NotTranslatable,\n  ParameterizedKey,\n  ParameterizedProps\n\u003e(translatablePlainTextKeys, notTranslatable, parameterizedValues);\n```\n"}},"navTree":[{"title":"Guide","links":[{"title":"Maybe Adapter","href":"/guide/maybe"},{"title":"Translations Package","href":"/guide/translations"}]},{"title":"Packages","links":[{"title":"ajaxian","href":"/packages/ajaxian"},{"title":"ajaxios","href":"/packages/ajaxios"},{"title":"@kofno/cute","href":"/packages/cute"},{"title":"@kofno/gaia","href":"/packages/gaia"},{"title":"jsonous","href":"/packages/jsonous"},{"title":"maybeasy","href":"/packages/maybeasy"},{"title":"nonempty-list","href":"/packages/nonempty-list"},{"title":"@kofno/piper","href":"/packages/piper"},{"title":"resulty","href":"/packages/resulty"},{"title":"@kofno/stack-ts","href":"/packages/stack-ts"},{"title":"taskarian","href":"/packages/taskarian"},{"title":"@execonline-inc/appy","href":"/packages/appy"},{"title":"@execonline-inc/collections","href":"/packages/collections"},{"title":"@execonline-inc/decoders","href":"/packages/decoders"},{"title":"@execonline-inc/dom","href":"/packages/dom"},{"title":"@execonline-inc/environment","href":"/packages/environment"},{"title":"@execonline-inc/error-handling","href":"/packages/error-handling"},{"title":"@execonline-inc/logging","href":"/packages/logging"},{"title":"@execonline-inc/maybe-adapter","href":"/packages/maybe-adapter"},{"title":"@execonline-inc/numbers","href":"/packages/numbers"},{"title":"@execonline-inc/resource","href":"/packages/resource"},{"title":"@execonline-inc/time","href":"/packages/time"},{"title":"@execonline-inc/time-distance","href":"/packages/time-distance"},{"title":"@execonline-inc/translations","href":"/packages/translations"},{"title":"@execonline-inc/url","href":"/packages/url"}]}]},"__N_SSG":true},"page":"/guide/[slug]","query":{"slug":"translations"},"buildId":"mgDmpDuQ-1NkIUvq3ANjL","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>