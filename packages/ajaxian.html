<!DOCTYPE html><html class="dark js-focus-visible antialiased [font-feature-settings:&#x27;ss01&#x27;]" lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><meta name="next-head-count" content="2"/><link rel="preconnect" href="https://fonts.googleapis.com"/><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin /><link rel="preload" href="/_next/static/css/c3c652cee5f0d3cc.css" as="style"/><link rel="stylesheet" href="/_next/static/css/c3c652cee5f0d3cc.css" data-n-g=""/><link rel="preload" href="/_next/static/css/5ca09d9210f45551.css" as="style"/><link rel="stylesheet" href="/_next/static/css/5ca09d9210f45551.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-5cd94c89d3acac5f.js"></script><script src="/_next/static/chunks/webpack-5752944655d749a0.js" defer=""></script><script src="/_next/static/chunks/framework-76d02cbefae1782a.js" defer=""></script><script src="/_next/static/chunks/main-b92974553887b4ef.js" defer=""></script><script src="/_next/static/chunks/pages/_app-c3ea1a105fde863d.js" defer=""></script><script src="/_next/static/chunks/c727088c-1d2ac074e11cb790.js" defer=""></script><script src="/_next/static/chunks/63-78b0e34dce6c1d75.js" defer=""></script><script src="/_next/static/chunks/pages/packages/%5Bslug%5D-1ca39776efeb81d6.js" defer=""></script><script src="/_next/static/qQcl1ogaT4shbECN5-QD2/_buildManifest.js" defer=""></script><script src="/_next/static/qQcl1ogaT4shbECN5-QD2/_ssgManifest.js" defer=""></script><script src="/_next/static/qQcl1ogaT4shbECN5-QD2/_middlewareManifest.js" defer=""></script><style data-href="https://fonts.googleapis.com/css2?family=Atkinson+Hyperlegible:ital,wght@0,400;0,700;1,400;1,700&display=swap">@font-face{font-family:'Atkinson Hyperlegible';font-style:italic;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/atkinsonhyperlegible/v10/9Bt43C1KxNDXMspQ1lPyU89-1h6ONRlW45G055Iu.woff) format('woff')}@font-face{font-family:'Atkinson Hyperlegible';font-style:italic;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/atkinsonhyperlegible/v10/9Bt93C1KxNDXMspQ1lPyU89-1h6ONRlW45G056qRdiWJ.woff) format('woff')}@font-face{font-family:'Atkinson Hyperlegible';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/atkinsonhyperlegible/v10/9Bt23C1KxNDXMspQ1lPyU89-1h6ONRlW45GE5g.woff) format('woff')}@font-face{font-family:'Atkinson Hyperlegible';font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/atkinsonhyperlegible/v10/9Bt73C1KxNDXMspQ1lPyU89-1h6ONRlW45G8WbcNcA.woff) format('woff')}@font-face{font-family:'Atkinson Hyperlegible';font-style:italic;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/atkinsonhyperlegible/v10/9Bt43C1KxNDXMspQ1lPyU89-1h6ONRlW45G056IkUwCgblWmLWQ.woff2) format('woff2');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Atkinson Hyperlegible';font-style:italic;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/atkinsonhyperlegible/v10/9Bt43C1KxNDXMspQ1lPyU89-1h6ONRlW45G056IqUwCgblWm.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:'Atkinson Hyperlegible';font-style:italic;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/atkinsonhyperlegible/v10/9Bt93C1KxNDXMspQ1lPyU89-1h6ONRlW45G056qRdhWDTFiMF225Z2k.woff2) format('woff2');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Atkinson Hyperlegible';font-style:italic;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/atkinsonhyperlegible/v10/9Bt93C1KxNDXMspQ1lPyU89-1h6ONRlW45G056qRdhWNTFiMF225.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:'Atkinson Hyperlegible';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/atkinsonhyperlegible/v10/9Bt23C1KxNDXMspQ1lPyU89-1h6ONRlW45G07JIoWQeCbGWn.woff2) format('woff2');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Atkinson Hyperlegible';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/atkinsonhyperlegible/v10/9Bt23C1KxNDXMspQ1lPyU89-1h6ONRlW45G04pIoWQeCbA.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:'Atkinson Hyperlegible';font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/atkinsonhyperlegible/v10/9Bt73C1KxNDXMspQ1lPyU89-1h6ONRlW45G8Wbc9eiWPRl-uFV24.woff2) format('woff2');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Atkinson Hyperlegible';font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/atkinsonhyperlegible/v10/9Bt73C1KxNDXMspQ1lPyU89-1h6ONRlW45G8Wbc9dCWPRl-uFQ.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}</style></head><body class="prose prose-slate bg-white prose-lead:text-slate-500 prose-a:font-bold prose-a:no-underline prose-a:text-sky-500 max-w-full prose-a:shadow-[inset_0_17px_0_0_var(--tw-prose-background,#fff),inset_0_calc(-1*(var(--tw-prose-underline-size,4px)+2px))_0_0_var(--tw-prose-underline,theme(colors.sky.300))] hover:prose-a:[--tw-prose-underline-size:6px] dark:prose-invert dark:bg-slate-900 dark:text-slate-400 dark:[--tw-prose-background:theme(colors.slate.900)] dark:prose-lead:text-slate-400 dark:prose-a:text-sky-400 dark:prose-a:shadow-[var(--darkProseAShadow)] dark:hover:prose-a:[--tw-prose-underline-size:3px] dark:prose-hr:border-slate-800"><div id="__next"><div class="flex h-screen w-screen flex-col justify-between scroll-smooth"><header class="not-prose sticky top-0 z-50 flex items-center justify-between space-x-6 bg-white py-3 shadow-md shadow-slate-900/5 transition duration-500 dark:shadow-none sm:space-x-10 sm:py-4 md:py-5 dark:bg-transparent"><div class="content-container-width mx-auto py-3 flex items-center justify-between space-x-6"><a class="text-base font-bold text-green-600 hover:text-indigo-900 dark:text-green-300 dark:hover:text-indigo-300 sm:text-lg" href="/">CooperTS</a><nav class="md:text-md flex space-x-5 text-sm sm:space-x-10 sm:text-sm"><a class="font-medium text-gray-600 hover:text-gray-900 dark:text-gray-300 dark:hover:text-white" href="/about">About</a><a class="font-medium text-gray-600 hover:text-gray-900 dark:text-gray-300 dark:hover:text-white" href="/guide">Guide</a><a class="font-medium text-gray-600 hover:text-gray-900 dark:text-gray-300 dark:hover:text-white" href="/packages">Packages</a><a class="font-medium text-gray-600 hover:text-gray-900 dark:text-gray-300 dark:hover:text-white" href="/examples">Examples</a><a class="group" href="https://github.com/execonline-inc/CooperTS"><span class="sr-only">CooperTS on GitHub</span><svg aria-hidden="true" viewBox="0 0 16 16" class="h-6 w-6 fill-slate-500 group-hover:fill-slate-700 dark:fill-slate-300 dark:group-hover:fill-white"><path d="M8 0C3.58 0 0 3.58 0 8C0 11.54 2.29 14.53 5.47 15.59C5.87 15.66 6.02 15.42 6.02 15.21C6.02 15.02 6.01 14.39 6.01 13.72C4 14.09 3.48 13.23 3.32 12.78C3.23 12.55 2.84 11.84 2.5 11.65C2.22 11.5 1.82 11.13 2.49 11.12C3.12 11.11 3.57 11.7 3.72 11.94C4.44 13.15 5.59 12.81 6.05 12.6C6.12 12.08 6.33 11.73 6.56 11.53C4.78 11.33 2.92 10.64 2.92 7.58C2.92 6.71 3.23 5.99 3.74 5.43C3.66 5.23 3.38 4.41 3.82 3.31C3.82 3.31 4.49 3.1 6.02 4.13C6.66 3.95 7.34 3.86 8.02 3.86C8.7 3.86 9.38 3.95 10.02 4.13C11.55 3.09 12.22 3.31 12.22 3.31C12.66 4.41 12.38 5.23 12.3 5.43C12.81 5.99 13.12 6.7 13.12 7.58C13.12 10.65 11.25 11.33 9.47 11.53C9.76 11.78 10.01 12.26 10.01 13.01C10.01 14.08 10 14.94 10 15.21C10 15.42 10.15 15.67 10.55 15.59C13.71 14.53 16 11.53 16 8C16 3.58 12.42 0 8 0Z"></path></svg></a></nav></div></header><main class="fixed-origin content-container-width relative mx-auto flex flex-col justify-center"><span><a aria-label="Go Back" href="/packages">← Go Back</a></span><p><strong>ajaxian</strong>: <!-- -->Ajax requests with better error handling<!-- --></p><div class="prose prose-slate w-full lg:max-w-none prose-headings:scroll-mt-28 prose-headings:font-display prose-headings:font-normal prose-lead:text-slate-500 prose-a:font-semibold prose-a:no-underline prose-a:shadow-[var(--proseAShadow)] hover:prose-a:[--tw-prose-underline-size:6px] prose-pre:rounded-xl prose-pre:bg-slate-900 prose-pre:shadow-lg prose-pre:p-3 md:prose-pre:p-5 prose-pre:text-xs md:prose-pre:text-sm lg:prose-pre:text-base dark:prose-invert dark:text-slate-400 dark:[--tw-prose-background:theme(colors.slate.900)] dark:prose-lead:text-slate-400 dark:prose-a:text-sky-400 dark:prose-a:shadow-[var(--darkProseAShadow)] dark:hover:prose-a:[--tw-prose-underline-size:6px] dark:prose-pre:bg-slate-800/60 dark:prose-pre:shadow-none dark:prose-pre:ring-1 dark:prose-pre:ring-slate-300/10 dark:prose-hr:border-slate-800 lg:prose-headings:scroll-mt-[8.5rem]"><h1 id="ajaxian">ajaxian</h1>
<p><a href="https://travis-ci.org/kofno/ajaxian"><img src="https://travis-ci.org/kofno/ajaxian.svg?branch=master" alt="Build Status"></a>
<a href="https://github.com/semantic-release/semantic-release"><img src="https://img.shields.io/badge/%20%20%F0%9F%93%A6%F0%9F%9A%80-semantic--release-e10079.svg?style=flat-square" alt="semantic-release"></a></p>
<p>Ajaxian is a small wrapper around the XMLHttpRequest object. It borrows heavily
from the Elm Http module. In many ways it&#39;s not all that different from other
http libraries: build a request, send it to the server, and then handle the
response. The emphasis here is on handling error responses correctly and
consistently, without resorting to thrown exceptions.</p>
<p>Because it uses XMLHttpRequest, Ajaxian can only be used from the browser (or
a browser-like environment, like Electron). Browserify, Webpack, or some similar
tool may be required when packaging for deploy.</p>
<h2 id="tasks">tasks</h2>
<p>Instead of Promises, Ajaxian uses Futures (here called Tasks, from the
Taskarian library). Tasks are lazy and will not execute until forked. This
means a Task can be returned from a pure function. Tasks are also composable.
You can build a complex chain of behaviors, while strictly controlling exactly
when the side effects happen. In this way I prefer them over Promises, which
are stateful and initiate side effects as soon as they are instantiated.</p>
<h2 id="errors">errors</h2>
<p>Ajaxian does not throw errors for failed requests. Instead, failed requests
are returned as one of several different types of errors. Error conditions
are documented this way because I believe that you create a better user
experience when you handle error conditions gracefully. I want to provide
the tools for doing that.</p>
<p>All of the error types are documented in the HttpError module.</p>
<h2 id="decoders">decoders</h2>
<p>Decoders are another idea stolen from Elm. A decoder is a function that converts
the response body of a request into a data structure that can be used by the
application.</p>
<p>Ajaxian expects the decoder to return the results wrapped in a Result object.
If the data passes muster, then the decoder should return the data wrapped in
an Ok object. If the data is incorrect, then an error message wrapped will be
wrapped in an Err object. This will result in a BadPayload error.</p>
<p>If you are building a json heavy application, I would recommend checking out
<a href="https://github.com/kofno/jsonous">jsonous</a>. This library is specifically
built for creating composable decoders for handling json content.</p>
<h1 id="installing">installing</h1>
<blockquote>
<p>npm install --save ajaxian</p>
</blockquote>
<blockquote>
<p>yarn add ajaxian</p>
</blockquote>
<h1 id="usage">usage</h1>
<pre><code>import { toHttpTask, Request, header } from &#x27;ajaxian&#x27;;
import { ok } from &#x27;resulty&#x27;;

// Create a request object. This is a TS example.
const request: Request&lt;{}&gt; = {
  url: &#x27;/some_end_point&#x27;,
  method: &#x27;post&#x27;,
  data: { foo: &#x27;bar&#x27; },
  timeout: 0,
  headers: [header(&#x27;X-Some-Header&#x27;, &#x27;baz&#x27;)],
  withCredentials: true,
  decoder: () =&gt; ok({}),
};

toHttpTask(request).fork(
  err =&gt; console.error(err),
  data =&gt; console.log(&quot;Success!&quot;, data)
);
</code></pre>
<p>There are some convenience builders for making requests, too:</p>
<pre><code>import { post } from &#x27;ajaxian&#x27;;

const request = post(&#x27;/some_end_point&#x27;, { foo: bar }, () =&gt; ok({}))
  .withHeader(header(&#x27;X-Some-Header&#x27;, &#x27;baz&#x27;));
</code></pre>
<p>It is also possible to abort an HTTP request before it completes. Forking the
HTTP task returns an abort function from the underlying HTTP request object:</p>
<pre><code>const cancel = toHttpTask(request).fork(
  err =&gt; console.error(err),
  data =&gt; console.log(&quot;Success!&quot;, data),
);

cancel() // &lt;-- aborts request
</code></pre>
</div></main><div class="fixed bottom-0 right-0 z-[10000] flex h-auto w-auto items-center justify-center p-1  text-sm font-bold text-white dark:text-slate-900 rounded-full bg-slate-800 sm:bg-red-900 md:bg-blue-800 lg:bg-green-800 xl:bg-amber-600"><div class="inline-flex sm:hidden">xs (default)</div><div class="hidden sm:inline-flex md:hidden">SM</div><div class="hidden md:inline-flex lg:hidden">MD</div><div class="hidden lg:inline-flex xl:hidden">LG</div><div class="hidden xl:inline-flex">XL</div></div><footer class="not-prose sticky top-0 z-50 
        flex flex-wrap items-center justify-between
        bg-white
        py-5 px-4 shadow-md
        shadow-slate-900/5 
        dark:bg-slate-900/95 dark:shadow-none
        sm:px-6 lg:px-8" aria-label="footer"><p>© <!-- -->2022 <!-- --><a href="https://www.execonline.com/" target="_blank" rel="noopener noreferrer">ExecOnline</a></p></footer></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"packageData":{"slug":"ajaxian","metadata":{"name":"ajaxian","description":"Ajax requests with better error handling"},"markdown":{"content":"# ajaxian\n\n[![Build Status](https://travis-ci.org/kofno/ajaxian.svg?branch=master)](https://travis-ci.org/kofno/ajaxian)\n[![semantic-release](https://img.shields.io/badge/%20%20%F0%9F%93%A6%F0%9F%9A%80-semantic--release-e10079.svg?style=flat-square)](https://github.com/semantic-release/semantic-release)\n\nAjaxian is a small wrapper around the XMLHttpRequest object. It borrows heavily\nfrom the Elm Http module. In many ways it's not all that different from other\nhttp libraries: build a request, send it to the server, and then handle the\nresponse. The emphasis here is on handling error responses correctly and\nconsistently, without resorting to thrown exceptions.\n\nBecause it uses XMLHttpRequest, Ajaxian can only be used from the browser (or\na browser-like environment, like Electron). Browserify, Webpack, or some similar\ntool may be required when packaging for deploy.\n\n## tasks\n\nInstead of Promises, Ajaxian uses Futures (here called Tasks, from the\nTaskarian library). Tasks are lazy and will not execute until forked. This\nmeans a Task can be returned from a pure function. Tasks are also composable.\nYou can build a complex chain of behaviors, while strictly controlling exactly\nwhen the side effects happen. In this way I prefer them over Promises, which\nare stateful and initiate side effects as soon as they are instantiated.\n\n## errors\n\nAjaxian does not throw errors for failed requests. Instead, failed requests\nare returned as one of several different types of errors. Error conditions\nare documented this way because I believe that you create a better user\nexperience when you handle error conditions gracefully. I want to provide\nthe tools for doing that.\n\nAll of the error types are documented in the HttpError module.\n\n## decoders\n\nDecoders are another idea stolen from Elm. A decoder is a function that converts\nthe response body of a request into a data structure that can be used by the\napplication.\n\nAjaxian expects the decoder to return the results wrapped in a Result object.\nIf the data passes muster, then the decoder should return the data wrapped in\nan Ok object. If the data is incorrect, then an error message wrapped will be\nwrapped in an Err object. This will result in a BadPayload error.\n\nIf you are building a json heavy application, I would recommend checking out\n[jsonous](https://github.com/kofno/jsonous). This library is specifically\nbuilt for creating composable decoders for handling json content.\n\n# installing\n\n\u003e npm install --save ajaxian\n\n\u003e yarn add ajaxian\n\n# usage\n\n    import { toHttpTask, Request, header } from 'ajaxian';\n    import { ok } from 'resulty';\n\n    // Create a request object. This is a TS example.\n    const request: Request\u003c{}\u003e = {\n      url: '/some_end_point',\n      method: 'post',\n      data: { foo: 'bar' },\n      timeout: 0,\n      headers: [header('X-Some-Header', 'baz')],\n      withCredentials: true,\n      decoder: () =\u003e ok({}),\n    };\n\n    toHttpTask(request).fork(\n      err =\u003e console.error(err),\n      data =\u003e console.log(\"Success!\", data)\n    );\n\nThere are some convenience builders for making requests, too:\n\n    import { post } from 'ajaxian';\n\n    const request = post('/some_end_point', { foo: bar }, () =\u003e ok({}))\n      .withHeader(header('X-Some-Header', 'baz'));\n\nIt is also possible to abort an HTTP request before it completes. Forking the\nHTTP task returns an abort function from the underlying HTTP request object:\n\n    const cancel = toHttpTask(request).fork(\n      err =\u003e console.error(err),\n      data =\u003e console.log(\"Success!\", data),\n    );\n\n    cancel() // \u003c-- aborts request\n"}},"navTree":[{"title":"Guide","links":[{"title":"Maybe Adapter","href":"/guide/maybe"},{"title":"CooperTS - Practical Patterns","href":"/guide/practical-patterns"},{"title":"Translations Package","href":"/guide/translations"}]},{"title":"Packages","links":[{"title":"ajaxian","href":"/packages/ajaxian"},{"title":"ajaxios","href":"/packages/ajaxios"},{"title":"@kofno/cute","href":"/packages/cute"},{"title":"@kofno/gaia","href":"/packages/gaia"},{"title":"jsonous","href":"/packages/jsonous"},{"title":"maybeasy","href":"/packages/maybeasy"},{"title":"nonempty-list","href":"/packages/nonempty-list"},{"title":"@kofno/piper","href":"/packages/piper"},{"title":"resulty","href":"/packages/resulty"},{"title":"@kofno/stack-ts","href":"/packages/stack-ts"},{"title":"taskarian","href":"/packages/taskarian"},{"title":"@execonline-inc/appy","href":"/packages/appy"},{"title":"@execonline-inc/collections","href":"/packages/collections"},{"title":"@execonline-inc/decoders","href":"/packages/decoders"},{"title":"@execonline-inc/dom","href":"/packages/dom"},{"title":"@execonline-inc/environment","href":"/packages/environment"},{"title":"@execonline-inc/error-handling","href":"/packages/error-handling"},{"title":"@execonline-inc/logging","href":"/packages/logging"},{"title":"@execonline-inc/maybe-adapter","href":"/packages/maybe-adapter"},{"title":"@execonline-inc/numbers","href":"/packages/numbers"},{"title":"@execonline-inc/resource","href":"/packages/resource"},{"title":"@execonline-inc/strings","href":"/packages/strings"},{"title":"@execonline-inc/time","href":"/packages/time"},{"title":"@execonline-inc/time-distance","href":"/packages/time-distance"},{"title":"@execonline-inc/translations","href":"/packages/translations"},{"title":"@execonline-inc/url","href":"/packages/url"}]}]},"__N_SSG":true},"page":"/packages/[slug]","query":{"slug":"ajaxian"},"buildId":"qQcl1ogaT4shbECN5-QD2","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>